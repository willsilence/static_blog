import{_ as e,a as c,b as r}from"./chunks/PageInfo.vue_vue_type_script_setup_true_lang.61fdc39d.js";import{_ as E}from"./chunks/CustomLink.cd661532.js";import{_ as u,o as y,c as i,H as n,k as s,a,Q as q}from"./chunks/framework.926cbeec.js";import"./chunks/commonjsHelpers.725317a4.js";const j=JSON.parse('{"title":"给 VitePress 添加 algolia 搜索解决方案（高版本 alpha.37 以后）","description":"","frontmatter":{"author":"Richard-Zhang1019","contributors":["Choi Yang"],"date":"2023-02-17T00:00:00.000Z"},"headers":[],"relativePath":"program/vitepress-algolia-solved/index.md","filePath":"program/vitepress-algolia-solved/index.md","lastUpdated":1696923443000}'),F={name:"program/vitepress-algolia-solved/index.md"},b=s("h1",{id:"给-vitepress-添加-algolia-搜索解决方案-高版本-alpha-37-以后",tabindex:"-1"},[a("给 VitePress 添加 algolia 搜索解决方案（高版本 alpha.37 以后） "),s("a",{class:"header-anchor",href:"#给-vitepress-添加-algolia-搜索解决方案-高版本-alpha-37-以后","aria-label":'Permalink to "给 VitePress 添加 algolia 搜索解决方案（高版本 alpha.37 以后）"'},"​")],-1),m=s("p",null,"按照之前的方案在使用 alpha.36 之前的版本是没问题的，但是由于 alpha.37 开始支持 i18n，原来的方法似乎不奏效了，在控制台 network 里发现没有返回搜索结果，这好我自己也在做文档搜索相关的内容，就去调研了一下，得到了一个非常简单的解决方案。",-1),C=s("h3",{id:"首先我是去-vitepress-下提了一个-issue",tabindex:"-1"},[a("首先我是去 vitepress 下提了一个 issue "),s("a",{class:"header-anchor",href:"#首先我是去-vitepress-下提了一个-issue","aria-label":'Permalink to "首先我是去 vitepress 下提了一个 issue"'},"​")],-1),d=q(`<p>很快给我了回复，但是他是认为是我这边的爬虫问题，让我去 algolia 控制台重启爬虫，这也并没有解决，也就不不了了之了。</p><p>隔了几天另一位朋友在我的 issue 下留言，提供了他的爬虫配置，在爬虫文件里加了些配置，我立马去在我自己的项目里去尝试了下，没想到直接就成功了，立马过来文档里来分享给各位。</p><p>我自己的 vitepress 是使用的目前最新的 vitepress <code>1.0.0-alpha.45</code>，这个方法是没问题的，并且很简单，只需要在爬虫里加一些字段即可。</p><div class="language-json vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">{</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">&quot;index_name&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;***&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">&quot;start_urls&quot;</span><span style="color:#E1E4E8;">: [</span><span style="color:#9ECBFF;">&quot;***&quot;</span><span style="color:#E1E4E8;">],</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">&quot;rateLimit&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">8</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">&quot;maxDepth&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">10</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">&quot;selectors&quot;</span><span style="color:#E1E4E8;">: {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">&quot;lvl0&quot;</span><span style="color:#E1E4E8;">: {</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#79B8FF;">&quot;selector&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#79B8FF;">&quot;defaultValue&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;Documentation&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">    },</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">&quot;lvl1&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;.content h1&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">&quot;lvl2&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;.content h2&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">&quot;lvl3&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;.content h3&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">&quot;lvl4&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;.content h4&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">&quot;lvl5&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;.content h5&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">&quot;content&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;.content p, .content li&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">&quot;lang&quot;</span><span style="color:#E1E4E8;">: {</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#79B8FF;">&quot;selector&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;/html/@lang&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#79B8FF;">&quot;type&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;xpath&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#79B8FF;">&quot;global&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">true</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"><span style="color:#E1E4E8;">  },</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">&quot;selectors_exclude&quot;</span><span style="color:#E1E4E8;">: [</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">&quot;aside&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">&quot;.page-footer&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">&quot;.next-and-prev-link&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">&quot;.table-of-contents&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">  ],</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">&quot;custom_settings&quot;</span><span style="color:#E1E4E8;">: {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">&quot;attributesForFaceting&quot;</span><span style="color:#E1E4E8;">: [</span><span style="color:#9ECBFF;">&quot;lang&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&quot;tags&quot;</span><span style="color:#E1E4E8;">]</span></span>
<span class="line"><span style="color:#E1E4E8;">  },</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">&quot;js_render&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">true</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">{</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#005CC5;">&quot;index_name&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;***&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#005CC5;">&quot;start_urls&quot;</span><span style="color:#24292E;">: [</span><span style="color:#032F62;">&quot;***&quot;</span><span style="color:#24292E;">],</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#005CC5;">&quot;rateLimit&quot;</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">8</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#005CC5;">&quot;maxDepth&quot;</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">10</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#005CC5;">&quot;selectors&quot;</span><span style="color:#24292E;">: {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">&quot;lvl0&quot;</span><span style="color:#24292E;">: {</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#005CC5;">&quot;selector&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#005CC5;">&quot;defaultValue&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;Documentation&quot;</span></span>
<span class="line"><span style="color:#24292E;">    },</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">&quot;lvl1&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;.content h1&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">&quot;lvl2&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;.content h2&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">&quot;lvl3&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;.content h3&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">&quot;lvl4&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;.content h4&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">&quot;lvl5&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;.content h5&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">&quot;content&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;.content p, .content li&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">&quot;lang&quot;</span><span style="color:#24292E;">: {</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#005CC5;">&quot;selector&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;/html/@lang&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#005CC5;">&quot;type&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;xpath&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#005CC5;">&quot;global&quot;</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">true</span></span>
<span class="line"><span style="color:#24292E;">    }</span></span>
<span class="line"><span style="color:#24292E;">  },</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#005CC5;">&quot;selectors_exclude&quot;</span><span style="color:#24292E;">: [</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#032F62;">&quot;aside&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#032F62;">&quot;.page-footer&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#032F62;">&quot;.next-and-prev-link&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#032F62;">&quot;.table-of-contents&quot;</span></span>
<span class="line"><span style="color:#24292E;">  ],</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#005CC5;">&quot;custom_settings&quot;</span><span style="color:#24292E;">: {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">&quot;attributesForFaceting&quot;</span><span style="color:#24292E;">: [</span><span style="color:#032F62;">&quot;lang&quot;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&quot;tags&quot;</span><span style="color:#24292E;">]</span></span>
<span class="line"><span style="color:#24292E;">  },</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#005CC5;">&quot;js_render&quot;</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">true</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br></div></div><p>这里是我自己的网站使用的搜索，大家可以去试一下。</p>`,5),h=s("h2",{id:"contributors",tabindex:"-1"},[a("Contributors "),s("a",{class:"header-anchor",href:"#contributors","aria-label":'Permalink to "Contributors"'},"​")],-1);function _(B,g,v,f,x,k){const o=e,l=E,p=c,t=r;return y(),i("div",null,[b,n(o,{readTime:"1",words:"433"}),m,C,n(l,{title:"algolia Search can’t return result · Issue #1935 · vuejs/vitepress",href:"https://github.com/vuejs/vitepress/issues/1935"}),d,n(l,{title:"lucky-design",href:"https://lucky-design.vercel.app/"}),h,n(p),n(t)])}const D=u(F,[["render",_]]);export{j as __pageData,D as default};

import{_ as E,a as i,b as y}from"./chunks/PageInfo.vue_vue_type_script_setup_true_lang.bc46e4f5.js";import{_ as u}from"./chunks/CloudinaryImg.vue_vue_type_script_setup_true_lang.87fcf701.js";import{_ as d}from"./chunks/CustomLink.cd661532.js";import{_ as b}from"./chunks/VideoLink.vue_vue_type_script_setup_true_lang.4aa17f81.js";import{_ as q,o as h,c as m,H as a,w as F,k as s,a as n,Q as p}from"./chunks/framework.926cbeec.js";import"./chunks/commonjsHelpers.725317a4.js";const M=JSON.parse('{"title":"给 VitePress 添加 algolia 搜索","description":"","frontmatter":{"author":"Choi Yang","date":"2022-12-18T00:00:00.000Z"},"headers":[],"relativePath":"program/vitepress-algolia/index.md","filePath":"program/vitepress-algolia/index.md","lastUpdated":1696923443000}'),_={name:"program/vitepress-algolia/index.md"},g=s("h1",{id:"给-vitepress-添加-algolia-搜索",tabindex:"-1"},[n("给 VitePress 添加 algolia 搜索 "),s("a",{class:"header-anchor",href:"#给-vitepress-添加-algolia-搜索","aria-label":'Permalink to "给 VitePress 添加 algolia 搜索"'},"​")],-1),C=s("h2",{id:"背景",tabindex:"-1"},[n("背景 "),s("a",{class:"header-anchor",href:"#背景","aria-label":'Permalink to "背景"'},"​")],-1),f=s("p",null,"之前看 VitePress 官网发现没有相关介绍文档，不过好在自己对于 algolia 比较熟悉了，于是自己在项目中集成了。",-1),B=s("h2",{id:"前期准备",tabindex:"-1"},[n("前期准备 "),s("a",{class:"header-anchor",href:"#前期准备","aria-label":'Permalink to "前期准备"'},"​")],-1),A=s("h3",{id:"账号与创建应用",tabindex:"-1"},[n("账号与创建应用 "),s("a",{class:"header-anchor",href:"#账号与创建应用","aria-label":'Permalink to "账号与创建应用"'},"​")],-1),v=s("p",null,"登录之后会进入控制台页面，点击右上角头像，会有一个设置选项，之后来到 Applications 这里，去创建一个应用，以我自己的为例，下图已经创建好了「chodocs」。",-1),x=s("h2",{id:"配置",tabindex:"-1"},[n("配置 "),s("a",{class:"header-anchor",href:"#配置","aria-label":'Permalink to "配置"'},"​")],-1),k=s("h3",{id:"获取-key",tabindex:"-1"},[n("获取 key "),s("a",{class:"header-anchor",href:"#获取-key","aria-label":'Permalink to "获取 key"'},"​")],-1),P=s("p",null,"如图下所示，进入 API Keys 页面。",-1),D=s("p",null,[n("会看到如下界面，一个是可公开的，"),s("code",null,"Search-Only API Key"),n(" 是待会我们在 VitePress 项目中会使用的，而 "),s("code",null,"Admin API Key"),n(" 是用于一会爬虫的 key，因为是私有的，所以一会放在 Github Secrets 中。")],-1),I=s("h3",{id:"在文档中填写-key",tabindex:"-1"},[n("在文档中填写 key "),s("a",{class:"header-anchor",href:"#在文档中填写-key","aria-label":'Permalink to "在文档中填写 key"'},"​")],-1),T=s("p",null,[n("在上一步我们获取了公开的 key，在这里我们就来配置一下，将上述的 "),s("code",null,"Search-Only API Key"),n(" 填到 apiKey 字段中，"),s("strong",null,"私有的 key 不要填"),n("！")],-1),w=s("code",null,"docs/.vitepress/config",-1),j=p(`<div class="language-json vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">{</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">&quot;xxx&quot;</span><span style="color:#E1E4E8;">: {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">// ...</span></span>
<span class="line"><span style="color:#E1E4E8;">  },</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">&quot;algolia&quot;</span><span style="color:#E1E4E8;">: {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">&quot;appId&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;RDDxxx&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#6A737D;">// 需要替换</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">&quot;apiKey&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;9302dbxxx&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#6A737D;">// 需要替换</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">&quot;indexName&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;chodocs&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#6A737D;">// 需要替换</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">&quot;placeholder&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;请输入关键词&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">&quot;buttonText&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;搜索&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">{</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#005CC5;">&quot;xxx&quot;</span><span style="color:#24292E;">: {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// ...</span></span>
<span class="line"><span style="color:#24292E;">  },</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#005CC5;">&quot;algolia&quot;</span><span style="color:#24292E;">: {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">&quot;appId&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;RDDxxx&quot;</span><span style="color:#24292E;">, </span><span style="color:#6A737D;">// 需要替换</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">&quot;apiKey&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;9302dbxxx&quot;</span><span style="color:#24292E;">, </span><span style="color:#6A737D;">// 需要替换</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">&quot;indexName&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;chodocs&quot;</span><span style="color:#24292E;">, </span><span style="color:#6A737D;">// 需要替换</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">&quot;placeholder&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;请输入关键词&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">&quot;buttonText&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;搜索&quot;</span></span>
<span class="line"><span style="color:#24292E;">  }</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h3 id="私钥放在-github-secrets-中" tabindex="-1">私钥放在 Github Secrets 中 <a class="header-anchor" href="#私钥放在-github-secrets-中" aria-label="Permalink to &quot;私钥放在 Github Secrets 中&quot;">​</a></h3><p>将上述获取的 <code>Admin API Key</code> 添加到 Github Secrets 中，如下图所示，创建 <code>API_KEY</code> 和 <code>APPLICATION_ID</code> 两个字段，一会在 ci 中会使用到。</p>`,3),V=p(`<h3 id="创建-crawlerconfig-json" tabindex="-1">创建 crawlerConfig.json <a class="header-anchor" href="#创建-crawlerconfig-json" aria-label="Permalink to &quot;创建 crawlerConfig.json&quot;">​</a></h3><p>在项目的根目录下创建 <code>crawlerConfig.json</code> 文件，内容如下，注意前两个字段需要进行替换。这是告诉 <code>algolia</code> 需要爬取的配置。</p><div class="language-json vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">{</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">&quot;index_name&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;chodocs&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#6A737D;">// 填写自己的索引名称</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">&quot;start_urls&quot;</span><span style="color:#E1E4E8;">: [</span><span style="color:#9ECBFF;">&quot;/&quot;</span><span style="color:#E1E4E8;">], </span><span style="color:#6A737D;">// 填写自己的网站地址</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">&quot;rateLimit&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">8</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">&quot;maxDepth&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">10</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">&quot;selectors&quot;</span><span style="color:#E1E4E8;">: {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">&quot;lvl0&quot;</span><span style="color:#E1E4E8;">: {</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#79B8FF;">&quot;selector&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#79B8FF;">&quot;defaultValue&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;Documentation&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">    },</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">&quot;lvl1&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;.content h1&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">&quot;lvl2&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;.content h2&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">&quot;lvl3&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;.content h3&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">&quot;lvl4&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;.content h4&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">&quot;lvl5&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;.content h5&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">&quot;content&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;.content p, .content li&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">  },</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">&quot;selectors_exclude&quot;</span><span style="color:#E1E4E8;">: [</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">&quot;aside&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">&quot;.page-footer&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">&quot;.next-and-prev-link&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">&quot;.table-of-contents&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">  ],</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">&quot;js_render&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">true</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">{</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#005CC5;">&quot;index_name&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;chodocs&quot;</span><span style="color:#24292E;">, </span><span style="color:#6A737D;">// 填写自己的索引名称</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#005CC5;">&quot;start_urls&quot;</span><span style="color:#24292E;">: [</span><span style="color:#032F62;">&quot;/&quot;</span><span style="color:#24292E;">], </span><span style="color:#6A737D;">// 填写自己的网站地址</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#005CC5;">&quot;rateLimit&quot;</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">8</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#005CC5;">&quot;maxDepth&quot;</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">10</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#005CC5;">&quot;selectors&quot;</span><span style="color:#24292E;">: {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">&quot;lvl0&quot;</span><span style="color:#24292E;">: {</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#005CC5;">&quot;selector&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#005CC5;">&quot;defaultValue&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;Documentation&quot;</span></span>
<span class="line"><span style="color:#24292E;">    },</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">&quot;lvl1&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;.content h1&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">&quot;lvl2&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;.content h2&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">&quot;lvl3&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;.content h3&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">&quot;lvl4&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;.content h4&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">&quot;lvl5&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;.content h5&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">&quot;content&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;.content p, .content li&quot;</span></span>
<span class="line"><span style="color:#24292E;">  },</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#005CC5;">&quot;selectors_exclude&quot;</span><span style="color:#24292E;">: [</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#032F62;">&quot;aside&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#032F62;">&quot;.page-footer&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#032F62;">&quot;.next-and-prev-link&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#032F62;">&quot;.table-of-contents&quot;</span></span>
<span class="line"><span style="color:#24292E;">  ],</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#005CC5;">&quot;js_render&quot;</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">true</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><h3 id="编写-ci-脚本" tabindex="-1">编写 CI 脚本 <a class="header-anchor" href="#编写-ci-脚本" aria-label="Permalink to &quot;编写 CI 脚本&quot;">​</a></h3><p>在项目根目录<code>.github/workflows</code> 文件夹下，创建 <code>algolia.yml</code> 文件（名称可更改，自定义），粘贴如下内容：</p><div class="language-yaml vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#85E89D;">name</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">algolia</span></span>
<span class="line"><span style="color:#79B8FF;">on</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">push</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">branches</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">      - </span><span style="color:#9ECBFF;">main</span></span>
<span class="line"><span style="color:#85E89D;">jobs</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">algolia</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">runs-on</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">ubuntu-latest</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">steps</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">      - </span><span style="color:#85E89D;">uses</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">actions/checkout@v3</span></span>
<span class="line"><span style="color:#E1E4E8;">      - </span><span style="color:#85E89D;">name</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">Get the content of algolia.json as config</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#85E89D;">id</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">algolia_config</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#85E89D;">run</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">echo &quot;config=$(cat crawlerConfig.json | jq -r tostring)&quot; &gt;&gt; $GITHUB_OUTPUT</span></span>
<span class="line"><span style="color:#E1E4E8;">      - </span><span style="color:#85E89D;">name</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">Push indices to Algolia</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#85E89D;">uses</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">signcl/docsearch-scraper-action@master</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#85E89D;">env</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">          </span><span style="color:#85E89D;">APPLICATION_ID</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">\${{ secrets.APPLICATION_ID }}</span></span>
<span class="line"><span style="color:#E1E4E8;">          </span><span style="color:#85E89D;">API_KEY</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">\${{ secrets.API_KEY }}</span></span>
<span class="line"><span style="color:#E1E4E8;">          </span><span style="color:#85E89D;">CONFIG</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">\${{ steps.algolia_config.outputs.config }}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#22863A;">name</span><span style="color:#24292E;">: </span><span style="color:#032F62;">algolia</span></span>
<span class="line"><span style="color:#005CC5;">on</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">push</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">branches</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">      - </span><span style="color:#032F62;">main</span></span>
<span class="line"><span style="color:#22863A;">jobs</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">algolia</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">runs-on</span><span style="color:#24292E;">: </span><span style="color:#032F62;">ubuntu-latest</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">steps</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">      - </span><span style="color:#22863A;">uses</span><span style="color:#24292E;">: </span><span style="color:#032F62;">actions/checkout@v3</span></span>
<span class="line"><span style="color:#24292E;">      - </span><span style="color:#22863A;">name</span><span style="color:#24292E;">: </span><span style="color:#032F62;">Get the content of algolia.json as config</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#22863A;">id</span><span style="color:#24292E;">: </span><span style="color:#032F62;">algolia_config</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#22863A;">run</span><span style="color:#24292E;">: </span><span style="color:#032F62;">echo &quot;config=$(cat crawlerConfig.json | jq -r tostring)&quot; &gt;&gt; $GITHUB_OUTPUT</span></span>
<span class="line"><span style="color:#24292E;">      - </span><span style="color:#22863A;">name</span><span style="color:#24292E;">: </span><span style="color:#032F62;">Push indices to Algolia</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#22863A;">uses</span><span style="color:#24292E;">: </span><span style="color:#032F62;">signcl/docsearch-scraper-action@master</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#22863A;">env</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">          </span><span style="color:#22863A;">APPLICATION_ID</span><span style="color:#24292E;">: </span><span style="color:#032F62;">\${{ secrets.APPLICATION_ID }}</span></span>
<span class="line"><span style="color:#24292E;">          </span><span style="color:#22863A;">API_KEY</span><span style="color:#24292E;">: </span><span style="color:#032F62;">\${{ secrets.API_KEY }}</span></span>
<span class="line"><span style="color:#24292E;">          </span><span style="color:#22863A;">CONFIG</span><span style="color:#24292E;">: </span><span style="color:#032F62;">\${{ steps.algolia_config.outputs.config }}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><blockquote><p>解释一下：这里 yml 就是使用 Github Actions 在 Docker 中执行的 AlgoliaDocSearch scraper action，当我们推送到 main 分支时就会立即执行这个任务，当然如果你是 master 分支只需要修改 branches 那里的值即可。</p></blockquote><h2 id="结尾" tabindex="-1">结尾 <a class="header-anchor" href="#结尾" aria-label="Permalink to &quot;结尾&quot;">​</a></h2>`,8),$=s("p",null,"预计 23 年我会把这个搜索做一份开源版本，敬请期待。",-1),N=s("h2",{id:"contributors",tabindex:"-1"},[n("Contributors "),s("a",{class:"header-anchor",href:"#contributors","aria-label":'Permalink to "Contributors"'},"​")],-1);function S(K,G,O,L,U,Y){const e=E,t=b,o=d,l=u,c=i,r=y;return h(),m("div",null,[g,a(e,{readTime:"3",words:"918"}),a(t,{bvId:"BV1eG4y1g7Kj"},{default:F(()=>[n("【编程】在 VitePress 中添加 Algolia 搜索，手把手教学 B 站视频传送门")]),_:1}),C,s("p",null,[n("最近在折腾 VitePress，搭建了一个文档项目："),a(o,{title:"ChoDocs",href:"/"}),n("，不过文档还不支持搜索功能，虽然目前内容不多，但待我同步完之后，搜索就很有必要了。")]),f,a(l,{publicId:"program/vitepress-algolia-config_psxytb",alt:"vitepress-algolia-config"}),B,A,s("p",null,[n("需要再 "),a(o,{title:"algolia 官网",href:"https://www.algolia.com/doc/"}),n(" 注册一个账号，或者直接选择以 GitHub 身份登录。")]),a(l,{publicId:"program/algolia-index_kfusvo",alt:"algolia-index"}),v,a(l,{publicId:"program/algolia-new-app_cqdd2f",alt:"algolia-new-app"}),x,k,P,a(l,{publicId:"program/algolia-overview_riawa3",alt:"algolia-overview"}),D,a(l,{publicId:"program/algolia-apikeys_eudmrp",alt:"algolia-apikeys"}),I,T,s("p",null,[n("修改文件在 "),w,n(" 文件中，具体可参考链接 "),a(o,{title:"config.ts",href:"https://github.com/chodocs/chodocs/blob/main/docs/.vitepress/config.ts"}),n("。")]),j,a(l,{publicId:"program/chodocs-settings_laq3ug",alt:"chodocs-settings"}),V,s("p",null,[n("关于这个搜索个人觉得只是满足了基本的需求，而 algolia 官网的那个搜索才会功能更全面，而我之前在公司项目中就根据官网效果做了一个搜索，可以访问"),a(o,{title:"帮助中心",href:"https://coding.net/help"}),n("体验。")]),a(l,{publicId:"program/help-search_vxs4ay",alt:"help-search"}),$,N,a(c),a(r)])}const W=q(_,[["render",S]]);export{M as __pageData,W as default};

import{_ as c,a as E,b as y}from"./chunks/PageInfo.vue_vue_type_script_setup_true_lang.61fdc39d.js";import{_ as i}from"./chunks/CustomLink.cd661532.js";import{_ as F}from"./chunks/VideoLink.vue_vue_type_script_setup_true_lang.4aa17f81.js";import{_ as d,o as m,c as h,H as a,w as u,k as s,a as n,Q as l}from"./chunks/framework.926cbeec.js";import"./chunks/commonjsHelpers.725317a4.js";const z=JSON.parse('{"title":"使用 dumi 发布个人的 npm 包","description":"","frontmatter":{"author":"Choi Yang","date":"2022-11-26T00:00:00.000Z"},"headers":[],"relativePath":"program/npm-package/index.md","filePath":"program/npm-package/index.md","lastUpdated":1696923443000}'),b={name:"program/npm-package/index.md"},C=s("h1",{id:"使用-dumi-发布个人的-npm-包",tabindex:"-1"},[n("使用 dumi 发布个人的 npm 包 "),s("a",{class:"header-anchor",href:"#使用-dumi-发布个人的-npm-包","aria-label":'Permalink to "使用 dumi 发布个人的 npm 包"'},"​")],-1),_=s("h2",{id:"前期准备",tabindex:"-1"},[n("前期准备 "),s("a",{class:"header-anchor",href:"#前期准备","aria-label":'Permalink to "前期准备"'},"​")],-1),B=s("ul",null,[s("li",null,"一个 npm 账号，如果没有的话需要自行注册。")],-1),g=s("ul",null,[s("li",null,"dumi 基础，可以观看如下视频快速学习文档。")],-1),v=l('<h2 id="使用-dumi" tabindex="-1">使用 dumi <a class="header-anchor" href="#使用-dumi" aria-label="Permalink to &quot;使用 dumi&quot;">​</a></h2><p>通过脚手架安装，根据提示选择对应的模版，由于我们要发布 npm 包，所以选择 <code>React Library</code>。</p><div class="language-sh vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">npx</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">create-dumi</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">npx</span><span style="color:#24292E;"> </span><span style="color:#032F62;">create-dumi</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h2 id="发布前注意事项" tabindex="-1">发布前注意事项 <a class="header-anchor" href="#发布前注意事项" aria-label="Permalink to &quot;发布前注意事项&quot;">​</a></h2><p>第一，npm 源需要使用 npmjs</p><div class="language-sh vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">npm</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">config</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">set</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">registry</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">https://registry.npmjs.org</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">npm</span><span style="color:#24292E;"> </span><span style="color:#032F62;">config</span><span style="color:#24292E;"> </span><span style="color:#032F62;">set</span><span style="color:#24292E;"> </span><span style="color:#032F62;">registry</span><span style="color:#24292E;"> </span><span style="color:#032F62;">https://registry.npmjs.org</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>第二，需要执行 <code>npm login</code>，填写用户名，邮箱等。</p><p>第三，package.json 里边 <code>name</code> 需要用小写，不能用大写</p>',8),k=s("code",null,"name",-1),f=s("h3",{id:"版本号规范",tabindex:"-1"},[n("版本号规范 "),s("a",{class:"header-anchor",href:"#版本号规范","aria-label":'Permalink to "版本号规范"'},"​")],-1),x=l(`<p>版本格式为：major.minor.patch，每个字母代表的含义如下：</p><p>主版本号（major）：当你做了不兼容的 API 修改， 次版本号（minor）：当你做了向下兼容的功能性新增， 修订号（patch）：当你做了向下兼容的问题修正。</p><p>先行版本号是加到修订号的后面，作为版本号的延伸；当要发行大版本或核心功能时，但不能保证这个版本完全正常，就要先发一个先行版本。</p><p>先行版本号的格式是在修订版本号后面加上一个连接号（-），再加上一连串以点（.）分割的标识符，标识符可以由英文、数字和连接号（[0-9A-Za-z-]）组成。举个例子：</p><div class="language-sh vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">1.0​​.0-alpha</span></span>
<span class="line"><span style="color:#B392F0;">1.0.0-alpha.1</span></span>
<span class="line"><span style="color:#B392F0;">1.0.0-0.2.5</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">1.0​​.0-alpha</span></span>
<span class="line"><span style="color:#6F42C1;">1.0.0-alpha.1</span></span>
<span class="line"><span style="color:#6F42C1;">1.0.0-0.2.5</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>常见的先行版本号有：</p><ul><li>alpha：不稳定版本，一般而言，该版本的 Bug 较多，需要继续修改，是测试版本</li><li>beta：基本稳定，相对于 Alpha 版已经有了很大的进步，消除了严重错误</li><li>rc：和正式版基本相同，基本上不存在导致错误的 Bug</li><li>release：最终版本</li></ul>`,7),T=l("<p>当然，我们最好是使用命令来规范我们的版本，举例：</p><blockquote><p>以下主要介绍常用的几个命令</p></blockquote><ul><li><code>npm version major</code> （3.1.0 --&gt; 4.0.0）</li><li><code>npm version minor</code>（2.0.1 --&gt; 2.1.0）</li><li><code>npm version patch</code>（2.0.0 --&gt; 2.0.1）</li></ul><p>至于 prexxx 开头的，以及 release 相关可以查询下述文档拓展学习。</p>",4),w=l(`<h2 id="补充相关命令" tabindex="-1">补充相关命令 <a class="header-anchor" href="#补充相关命令" aria-label="Permalink to &quot;补充相关命令&quot;">​</a></h2><div class="language-sh vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">//</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">登录自己的</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">npm</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">账号</span></span>
<span class="line"><span style="color:#B392F0;">npm</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">login</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">//</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">退出当前账号</span></span>
<span class="line"><span style="color:#B392F0;">npm</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">logout</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">//</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">查看当前身份</span></span>
<span class="line"><span style="color:#B392F0;">npm</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">who</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">am</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">i</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">//</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">发布</span></span>
<span class="line"><span style="color:#B392F0;">npm</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">publish</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">//</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">撤销发布某个版本</span></span>
<span class="line"><span style="color:#B392F0;">npm</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">unpublish</span><span style="color:#E1E4E8;"> [pkg]@[version]</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">//</span><span style="color:#24292E;"> </span><span style="color:#032F62;">登录自己的</span><span style="color:#24292E;"> </span><span style="color:#032F62;">npm</span><span style="color:#24292E;"> </span><span style="color:#032F62;">账号</span></span>
<span class="line"><span style="color:#6F42C1;">npm</span><span style="color:#24292E;"> </span><span style="color:#032F62;">login</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">//</span><span style="color:#24292E;"> </span><span style="color:#032F62;">退出当前账号</span></span>
<span class="line"><span style="color:#6F42C1;">npm</span><span style="color:#24292E;"> </span><span style="color:#032F62;">logout</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">//</span><span style="color:#24292E;"> </span><span style="color:#032F62;">查看当前身份</span></span>
<span class="line"><span style="color:#6F42C1;">npm</span><span style="color:#24292E;"> </span><span style="color:#032F62;">who</span><span style="color:#24292E;"> </span><span style="color:#032F62;">am</span><span style="color:#24292E;"> </span><span style="color:#032F62;">i</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">//</span><span style="color:#24292E;"> </span><span style="color:#032F62;">发布</span></span>
<span class="line"><span style="color:#6F42C1;">npm</span><span style="color:#24292E;"> </span><span style="color:#032F62;">publish</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">//</span><span style="color:#24292E;"> </span><span style="color:#032F62;">撤销发布某个版本</span></span>
<span class="line"><span style="color:#6F42C1;">npm</span><span style="color:#24292E;"> </span><span style="color:#032F62;">unpublish</span><span style="color:#24292E;"> [pkg]@[version]</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h2 id="解决遇到的问题" tabindex="-1">解决遇到的问题 <a class="header-anchor" href="#解决遇到的问题" aria-label="Permalink to &quot;解决遇到的问题&quot;">​</a></h2><h3 id="_403-问题" tabindex="-1">403 问题 <a class="header-anchor" href="#_403-问题" aria-label="Permalink to &quot;403 问题&quot;">​</a></h3><div class="language-sh vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">npm</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">ERR!</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">code</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">E403</span></span>
<span class="line"><span style="color:#B392F0;">npm</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">ERR!</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">403</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">403</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Forbidden</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">—</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">PUT</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">https://registry.npmjs.org/xxx</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">—</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">You</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">do</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">not</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">have</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">permission</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">to</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">publish</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">xxx.</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Are</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">you</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">logged</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">in</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">as</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">the</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">correct</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">user?</span></span>
<span class="line"><span style="color:#B392F0;">npm</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">ERR!</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">403</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">In</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">most</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">cases,</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">you</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">or</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">one</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">of</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">your</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">dependencies</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">are</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">requesting</span></span>
<span class="line"><span style="color:#B392F0;">npm</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">ERR!</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">403</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">a</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">package</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">version</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">that</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">is</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">forbidden</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">by</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">your</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">security</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">policy.</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">npm</span><span style="color:#24292E;"> </span><span style="color:#032F62;">ERR!</span><span style="color:#24292E;"> </span><span style="color:#032F62;">code</span><span style="color:#24292E;"> </span><span style="color:#032F62;">E403</span></span>
<span class="line"><span style="color:#6F42C1;">npm</span><span style="color:#24292E;"> </span><span style="color:#032F62;">ERR!</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">403</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">403</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Forbidden</span><span style="color:#24292E;"> </span><span style="color:#032F62;">—</span><span style="color:#24292E;"> </span><span style="color:#032F62;">PUT</span><span style="color:#24292E;"> </span><span style="color:#032F62;">https://registry.npmjs.org/xxx</span><span style="color:#24292E;"> </span><span style="color:#032F62;">—</span><span style="color:#24292E;"> </span><span style="color:#032F62;">You</span><span style="color:#24292E;"> </span><span style="color:#032F62;">do</span><span style="color:#24292E;"> </span><span style="color:#032F62;">not</span><span style="color:#24292E;"> </span><span style="color:#032F62;">have</span><span style="color:#24292E;"> </span><span style="color:#032F62;">permission</span><span style="color:#24292E;"> </span><span style="color:#032F62;">to</span><span style="color:#24292E;"> </span><span style="color:#032F62;">publish</span><span style="color:#24292E;"> </span><span style="color:#032F62;">xxx.</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Are</span><span style="color:#24292E;"> </span><span style="color:#032F62;">you</span><span style="color:#24292E;"> </span><span style="color:#032F62;">logged</span><span style="color:#24292E;"> </span><span style="color:#032F62;">in</span><span style="color:#24292E;"> </span><span style="color:#032F62;">as</span><span style="color:#24292E;"> </span><span style="color:#032F62;">the</span><span style="color:#24292E;"> </span><span style="color:#032F62;">correct</span><span style="color:#24292E;"> </span><span style="color:#032F62;">user?</span></span>
<span class="line"><span style="color:#6F42C1;">npm</span><span style="color:#24292E;"> </span><span style="color:#032F62;">ERR!</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">403</span><span style="color:#24292E;"> </span><span style="color:#032F62;">In</span><span style="color:#24292E;"> </span><span style="color:#032F62;">most</span><span style="color:#24292E;"> </span><span style="color:#032F62;">cases,</span><span style="color:#24292E;"> </span><span style="color:#032F62;">you</span><span style="color:#24292E;"> </span><span style="color:#032F62;">or</span><span style="color:#24292E;"> </span><span style="color:#032F62;">one</span><span style="color:#24292E;"> </span><span style="color:#032F62;">of</span><span style="color:#24292E;"> </span><span style="color:#032F62;">your</span><span style="color:#24292E;"> </span><span style="color:#032F62;">dependencies</span><span style="color:#24292E;"> </span><span style="color:#032F62;">are</span><span style="color:#24292E;"> </span><span style="color:#032F62;">requesting</span></span>
<span class="line"><span style="color:#6F42C1;">npm</span><span style="color:#24292E;"> </span><span style="color:#032F62;">ERR!</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">403</span><span style="color:#24292E;"> </span><span style="color:#032F62;">a</span><span style="color:#24292E;"> </span><span style="color:#032F62;">package</span><span style="color:#24292E;"> </span><span style="color:#032F62;">version</span><span style="color:#24292E;"> </span><span style="color:#032F62;">that</span><span style="color:#24292E;"> </span><span style="color:#032F62;">is</span><span style="color:#24292E;"> </span><span style="color:#032F62;">forbidden</span><span style="color:#24292E;"> </span><span style="color:#032F62;">by</span><span style="color:#24292E;"> </span><span style="color:#032F62;">your</span><span style="color:#24292E;"> </span><span style="color:#032F62;">security</span><span style="color:#24292E;"> </span><span style="color:#032F62;">policy.</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>一般是两种情况：</p>`,6),P=s("li",null,"邮箱不对",-1),R=s("code",null,"name",-1),j=s("h2",{id:"contributors",tabindex:"-1"},[n("Contributors "),s("a",{class:"header-anchor",href:"#contributors","aria-label":'Permalink to "Contributors"'},"​")],-1);function A(S,V,q,I,N,$){const o=c,e=F,p=i,r=E,t=y;return m(),h("div",null,[C,a(o,{readTime:"3",words:"869"}),a(e,{bvId:"BV1RK41197eA"},{default:u(()=>[n("【编程】基于 dumi 2.0 发布属于个人的 npm 包 | 造轮子必备技能 | 手把手 publish | 提供文档开箱即用 B 站视频传送门")]),_:1}),_,B,a(p,{title:"npm 注册地址",href:"https://www.npmjs.com/signup"}),g,a(p,{title:"【编程】dumi 2.0 发布，上手使用 | 文档介绍 | 居然发现 bug？",href:"https://www.bilibili.com/video/BV1KG4y1Z7ZX/"}),v,s("p",null,[n("第四，确保 package.json 里边的 "),k,n(" 和目前 "),a(p,{title:"npmjs",href:"https://www.npmjs.com/"}),n(" 网站已发布的不冲突。")]),f,s("p",null,[n("npm 包的版本通常遵循 "),a(p,{title:"semver 语义化版本",href:"https://semver.org/lang/zh-CN/"}),n("规范。")]),x,a(p,{title:"此处参考：从零开始发布自己的 NPM 包",href:"https://juejin.cn/post/7052307032971411463"}),T,a(p,{title:"文档指引：npm version",href:"https://www.npmjs.cn/cli/version/"}),w,s("ul",null,[P,s("li",null,[n("package.json 里边的 "),R,n(" 和目前 "),a(p,{title:"npmjs",href:"https://www.npmjs.com/"}),n(" 网站已发布的冲突了")])]),s("p",null,[n("参考"),a(p,{title:"Solve the error when npm publish for the first time.",href:"https://medium.com/@su_bak/solve-the-error-when-npm-publish-for-the-first-time-a4cca150f379"})]),j,a(r),a(t)])}const K=d(b,[["render",A]]);export{z as __pageData,K as default};
